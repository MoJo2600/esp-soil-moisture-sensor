(function(e){function t(t){for(var r,o,n=t[0],l=t[1],u=t[2],p=0,d=[];p<n.length;p++)o=n[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"4af8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),a("v-spacer"),a("v-icon",[e._v("mdi-thermometer")]),a("span",{staticClass:"mr-2"},[e._v(e._s(e.temperature)+" Â°C")]),a("v-icon",{attrs:{color:e.batteryIconColor}},[e._v(e._s(e.batteryIconName))]),a("span",{staticClass:"mr-2"},[e._v(e._s(e.battery)+"%")])],1),a("v-content",[a("CalibrationWizard")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.measureDialog,callback:function(t){e.measureDialog=t},expression:"measureDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-title",[e._v(" Please stand by ")]),a("v-card-text",[a("p",[e._v(" Received "+e._s(e.currentReading)+" ")]),a("p",[a("v-progress-linear",{staticClass:"mb-0",attrs:{active:e.showProgress,indeterminate:e.query,query:!0,color:"white"},model:{value:e.readingSampleProgress,callback:function(t){e.readingSampleProgress=t},expression:"readingSampleProgress"}})],1)])],1)],1),a("v-stepper",{attrs:{vertical:""},model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[a("v-stepper-step",{attrs:{complete:e.stepper>1,step:"1"}},[e._v("Welcome")]),a("v-stepper-content",{attrs:{step:"1"}},[a("h3",[e._v("How does it work?")]),e._v(" The wizard will guide you through a short calibration process. You'll need: "),a("p",[a("ul",[a("li",[e._v("A glass of water, large enough to fit the sensor up to the white line")]),a("li",[e._v("A fresh set of AA batteries")])])]),e._v(" The process is then as follows: "),a("p",[a("ol",[a("li",[e._v("We will take a reading of the battery to determine the current max value")]),a("li",[e._v("We will take a reading of the sensor when it is completely dry")]),a("li",[e._v("We will take a reading when it is submerged into water")])])]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.stepper=2}}},[e._v("Continue")])],1),a("v-stepper-step",{attrs:{complete:e.stepper>2,step:"2"}},[e._v("Battery reading")]),a("v-stepper-content",{attrs:{step:"2"}},[a("p",[e._v("Please make sure that you are using a fresh set of AA batteries.")]),a("div",{staticClass:"text-center"},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.showBatteryMeasureResult,expression:"!showBatteryMeasureResult"}],staticClass:"white--text",attrs:{disabled:e.measureDialog,loading:e.measureDialog,color:"purple darken-2"},on:{click:e.measureBattery}},[e._v("Take measurements")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showBatteryMeasureResult,expression:"showBatteryMeasureResult"}]},[e._v(" Battery average: "),a("b",[e._v(e._s(e.batteryAverage))])])],1),a("v-btn",{attrs:{color:"primary",disabled:e.batteryContinueDisabled},on:{click:function(t){e.stepper=3}}},[e._v("Continue")])],1),a("v-stepper-step",{attrs:{complete:e.stepper>3,step:"3"}},[e._v("Dry / Air reading")]),a("v-stepper-content",{attrs:{step:"3"}},[a("p",[e._v("Please make sure that the sensor is completely dry. Do not touch the sensor when taking the readings.")]),a("div",{staticClass:"text-center"},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.showDryMeasureResult,expression:"!showDryMeasureResult"}],staticClass:"white--text",attrs:{disabled:e.measureDialog,loading:e.measureDialog,color:"purple darken-2"},on:{click:e.measureDry}},[e._v("Take measurements")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showDryMeasureResult,expression:"showDryMeasureResult"}]},[e._v(" Dry / Air average: "),a("b",[e._v(e._s(e.dryAverage))])])],1),a("v-btn",{attrs:{color:"primary",disabled:e.dryContinueDisabled},on:{click:function(t){e.stepper=4}}},[e._v("Continue")])],1),a("v-stepper-step",{attrs:{complete:e.stepper>4,step:"4"}},[e._v("Moist / Water reading")]),a("v-stepper-content",{attrs:{step:"4"}},[a("p",[e._v("Now place the sensor up to the white line into a glass of tap water. Press the button when ready.")]),a("div",{staticClass:"text-center"},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.showMoistMeasureResult,expression:"!showMoistMeasureResult"}],staticClass:"white--text",attrs:{disabled:e.measureDialog,loading:e.measureDialog,color:"purple darken-2"},on:{click:e.measureMoist}},[e._v("Take measurements")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showMoistMeasureResult,expression:"showMoistMeasureResult"}]},[e._v(" Moist / Water average: "),a("b",[e._v(e._s(e.moistAverage))])])],1),a("v-btn",{attrs:{color:"primary",disabled:e.moistContinueDisabled},on:{click:function(t){e.stepper=5}}},[e._v("Continue")])],1),a("v-stepper-step",{attrs:{step:"5"}},[e._v("Done")]),a("v-stepper-content",{attrs:{step:"5"}},[a("v-row",[a("v-col",{attrs:{cols:"6"}},[e.calibrationComplete?a("JqxGauge",{ref:"moistureGauge",attrs:{min:e.minGauge,max:e.maxGauge,border:{visible:!1},value:0,colorScheme:"scheme01",animationDuration:1500,ranges:e.ranges,ticksMinor:e.ticksMinor,ticksMajor:e.ticksMajor,labels:e.labels,styleProperty:e.style,caption:e.caption,cap:"radius: 0.04"}}):e._e()],1),a("v-col",[a("JqxLinearGauge",{ref:"batteryGauge",attrs:{min:0,max:100,value:e.battery,pointer:e.batteryPointer,colorScheme:"scheme01",orientation:"vertical",labels:e.batteryLabels,ticksMajor:e.batteryTicksMajor,ticksMinor:e.batteryTicksMinor,ranges:e.batteryRanges,background:{visible:!1}}})],1)],1),a("v-row",[a("v-col",[e._v(" Moisture reading: "),a("b",[e._v(e._s(this.moisture_raw))])]),a("v-col",[e._v(" Battery reading: "),a("b",[e._v(e._s(this.battery))])])],1),a("p",[e._v("The calbration is completed. If you press the button, the sensor will restart and start sending messages to the broker. You can always reset the configuration by disconnecting the battery, long pressing the button, while you insert the batteries. ")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.save()}}},[e._v("Save and restart to Homie")])],1)],1)],1)],1)],1)},n=[],l=(a("13d5"),a("b65f"),a("d3b7"),a("ddb0"),a("9dab")),u=a("7b67"),c={name:"CalibrationWizard",components:{JqxGauge:l["a"],JqxLinearGauge:u["a"]},data:function(){return{calibrationComplete:!1,stepper:1,sampleCount:3,showDryMeasureResult:!1,showMoistMeasureResult:!1,showBatteryMeasureResult:!1,measureDialog:!1,measureTopic:"",dryContinueDisabled:!0,moistContinueDisabled:!0,batteryContinueDisabled:!0,dryValue:0,moistValue:0,batteryValue:0,query:!1,showProgress:!0,currentReading:0,readingSampleProgress:0,values:[],moisture_raw:0,battery:50,dryAverage:830,moistAverage:770,minGauge:500,maxGauge:900,ranges:[],batteryPointer:{size:"8%"},batteryLabels:{interval:10},batteryTicksMinor:{size:"5%",interval:2,style:{"stroke-width":1,stroke:"#aaaaaa"}},batteryTicksMajor:{size:"10%",interval:10},batteryRanges:[{startValue:0,endValue:33,style:{fill:"#FF4800",stroke:"#FF4800"}},{startValue:34,endValue:66,style:{fill:"#FFA200",stroke:"#FFA200"}},{startValue:67,endValue:100,style:{fill:"#228B22",stroke:"#228B22"}}]}},beforeCreate:function(){this.ticksMinor={interval:5,size:"5%"},this.ticksMajor={interval:10,size:"10%"},this.labels={visible:!0,position:"inside",interval:50},this.style={stroke:"#ffffff","stroke-width":"1px",fill:"#eeeee"},this.caption={offset:[0,0],value:"wet ------------- dry",position:"bottom"}},watch:{measureDialog:function(e){e&&(this.query=!0,this.showProgress=!0,this.readingSampleProgress=0)},stepper:function(e){if(e&&5==e){this.minGauge=10*Math.floor(this.moistAverage/10),this.maxGauge=10*Math.ceil(this.dryAverage/10);var t=Math.round((this.maxGauge-this.minGauge)/3);this.ranges=[{startValue:this.minGauge,endValue:this.minGauge+t,style:{fill:"#db5016",stroke:"#db5016"},startDistance:"5%",endDistance:"5%",endWidth:13,startWidth:13},{startValue:this.minGauge+t,endValue:this.maxGauge-t,style:{fill:"#228B22",stroke:"#228B22"},startDistance:"5%",endDistance:"5%",endWidth:13,startWidth:13},{startValue:this.maxGauge-t,endValue:this.maxGauge,style:{fill:"#db5016",stroke:"#db5016"},startDistance:"5%",endDistance:"5%",endWidth:13,startWidth:13}],this.calibrationComplete=!0}}},mounted:function(){var e=this;this.$options.sockets.onmessage=function(t){var a=JSON.parse(t.data);e.moisture_raw=a.moisture_raw,e.battery_raw=a.battery_raw,e.battery=a.battery_percent,e.$refs.moistureGauge&&(e.$refs.moistureGauge.value=a.moisture_raw),e.$refs.batteryGauge&&(e.$refs.batteryGauge.value=a.battery_percent),e.measureDialog&&(e.query=!1,e.values.length<=e.sampleCount&&(e.values.push(a.moisture_raw),"battery"==e.measureTopic?e.currentReading=a.battery_raw:e.currentReading=a.moisture_raw,e.readingSampleProgress=100/e.sampleCount*e.values.length,e.values.length==e.sampleCount&&(e.showProgress=!1,e.measureDialog=!1,e.finishedSampling()))),console.log(t.data)}},methods:{measureBattery:function(){this.measureTopic="battery",this.measureDialog=!0},measureDry:function(){this.measureTopic="dry",this.measureDialog=!0},measureMoist:function(){this.measureTopic="moist",this.measureDialog=!0},finishedSampling:function(){var e=Math.trunc(this.values.reduce((function(e,t){return e+t}),0)/this.values.length);this.values=[],"dry"==this.measureTopic?(this.dryAverage=e,this.dryContinueDisabled=!1,this.showDryMeasureResult=!0):"moist"==this.measureTopic?(this.moistAverage=e,this.moistContinueDisabled=!1,this.showMoistMeasureResult=!0):"battery"==this.measureTopic&&(this.batteryAverage=e,this.batteryContinueDisabled=!1,this.showBatteryMeasureResult=!0)},save:function(){this.$socket.sendObj({dry:this.dryAverage,wet:this.moistAverage,battery:this.batteryAverage})}}},p=c,d=(a("e3ac"),a("2877")),h=a("6544"),m=a.n(h),v=a("8336"),b=a("b0af"),g=a("99d9"),y=a("62ad"),f=a("a523"),w=a("169a"),_=a("8e36"),k=a("0fd9"),C=a("7e85"),M=a("e516"),D=a("56a4"),x=Object(d["a"])(p,o,n,!1,null,null,null),V=x.exports;m()(x,{VBtn:v["a"],VCard:b["a"],VCardText:g["a"],VCardTitle:g["b"],VCol:y["a"],VContainer:f["a"],VDialog:w["a"],VProgressLinear:_["a"],VRow:k["a"],VStepper:C["a"],VStepperContent:M["a"],VStepperStep:D["a"]});var A={name:"App",components:{CalibrationWizard:V},data:function(){return{battery:0,temperature:0,batteryIconColor:"red",batteryIconName:"mdi-battery-low"}},watch:{battery:function(e){e>66?(this.batteryIconColor="",this.batteryIconName="mdi-battery-high"):e>33?(this.batteryIconColor="yellow",this.batteryIconName="mdi-battery-medium"):(this.batteryIconColor="red",this.batteryIconName="mdi-battery-low")}},mounted:function(){var e=this;this.$options.sockets.onmessage=function(t){var a=JSON.parse(t.data);e.battery=a.battery_percent,e.temperature=a.temperature}}},R=A,P=a("7496"),G=a("40dc"),S=a("a75b"),T=a("132d"),j=a("adda"),B=a("2fa4"),O=Object(d["a"])(R,s,i,!1,null,null,null),N=O.exports;m()(O,{VApp:P["a"],VAppBar:G["a"],VContent:S["a"],VIcon:T["a"],VImg:j["a"],VSpacer:B["a"]});var W=a("f309");r["a"].use(W["a"]);var I=new W["a"]({}),$=a("b408"),q=a.n($);r["a"].config.productionTip=!1,r["a"].use(q.a,"ws://"+window.location.hostname+":81",{format:"json"}),new r["a"]({vuetify:I,render:function(e){return e(N)}}).$mount("#app")},e3ac:function(e,t,a){"use strict";var r=a("4af8"),s=a.n(r);s.a}});